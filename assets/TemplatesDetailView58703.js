import{C as k,D as R,k as x,c as S,E as T,g as $,j,r as _,n as F,o as n,f as C,w as h,a as l,F as E,d as B,t as m,e as g,z as I,b as f,G as Q,A as q,_ as N,h as O,m as P,l as V,q as U,s as A}from"../index58703.js";class L{static async fetchAllBaseSurveys(){return await k.get("/base_surveys")}static async fetchBaseSurveyDetail(a){return(await k.get(`/base_surveys/${a}`)).base_survey}}const z=R("base-survey-store",()=>{const u=x(null),a=x(null),i=S(()=>{var t,r;return(r=(t=u.value)==null?void 0:t.base_surveys)!=null?r:[]}),d=S(()=>{var t;return(t=a.value)!=null?t:null});async function c(){try{u.value=await L.fetchAllBaseSurveys()}catch(t){console.error(t)}}async function o(t){try{a.value=await L.fetchBaseSurveyDetail(t)}catch(r){console.error(r)}}function y(){u.value=null}return{paginatedBaseSurveys:T(u),baseSurvey:T(a),currentBaseSurveys:i,currentBaseSurvey:d,fetchBaseSurveys:c,fetchBaseSurveyDetail:o,$reset:y}}),G={class:"flex flex-column w-full"},H={class:"flex justify-content-between py-2 px-3 align-items-center"},J={key:0,class:"text-500 font-semibold"},K={class:"px-3 py-2"},W=$({__name:"BaseSurveyQuestionsList",props:{questions:{type:Array,required:!1}},setup(u){const a=j(),i=function(d,c){d.stopPropagation(),a.name=="dettaglio-campagna"?q.push({name:"campagna-dettaglio-domanda",params:{...a.params,question_id:c.id}}):q.push({name:"dettaglio-domanda",params:{id:c.id}})};return(d,c)=>{const o=_("Button"),y=_("Column"),t=_("DataTable"),r=_("AccordionTab"),w=_("Accordion"),b=F("tooltip");return n(),C(w,null,{default:h(()=>[(n(!0),l(Q,null,E(u.questions,e=>(n(),C(r,{key:e.id},{header:h(()=>[B("div",G,[B("div",H,[e.description?(n(),l("div",J,m(e.order)+") "+m(e.description),1)):g("v-if",!0),I(f(o,{type:"button",onClick:s=>i(s,e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-pencil"},null,8,["onClick"]),[[b,"Modifica",void 0,{top:!0}]])])])]),default:h(()=>[B("div",K,[f(t,{value:e.answers,responsiveLayout:"scroll"},{default:h(()=>[f(y,{field:"label",header:"Risposte"})]),_:1},8,["value"])])]),_:2},1024))),128))]),_:1})}}});const X=N(W,[["__file","/opt/atlassian/pipelines/agent/build/src/components/questions/BaseSurveyQuestionsList.vue"]]),Y={class:"m-4"},Z={class:"flex flex-column"},ee={key:0},te={key:0},se={key:1},ae={key:2,class:"flex flex-column gap-4 py-4"},oe=$({__name:"TemplatesDetailView",setup(u){const a=O(),i=z(),{showLoader:d,hideLoader:c}=U(),o=x(null),y=S(()=>i.currentBaseSurveys),t=S(()=>i.currentBaseSurvey),r=S(()=>{var e;if(!!((e=t.value)!=null&&e.sections))return t.value.sections.reduce((s,v)=>s+(v.questions?v.questions.length:0),0)}),w=async()=>{try{d(),await i.fetchBaseSurveys()}catch(e){V(a,e)}finally{c()}},b=async e=>{try{if(!e)return;d(),await i.fetchBaseSurveyDetail(e)}catch(s){V(a,s)}finally{c()}};return P(async()=>{var e,s,v;await w(),o.value=(s=(e=y.value)==null?void 0:e[0])!=null?s:null,(v=o.value)!=null&&v.id&&await b(o.value.id)}),(e,s)=>{const v=_("Dropdown"),M=_("Card");return n(),l("div",Y,[g(' <Breadcrumb :home="home" :model="items" class="mb-3 mt-0 pt-0" /> '),f(M,null,{content:h(()=>{var D;return[B("div",Z,[B("h1",null,[s[2]||(s[2]=A(" TEMPLATE QUESTIONARIO - ",-1)),o.value?(n(),l("span",ee,m(o.value.name),1)):g("v-if",!0)]),r.value===1?(n(),l("h2",te,m(r.value)+" Domanda ",1)):(n(),l("h2",se,m(r.value)+" Domande",1)),f(v,{options:y.value,modelValue:o.value,"onUpdate:modelValue":[s[0]||(s[0]=p=>o.value=p),s[1]||(s[1]=p=>b(p.id))],"option-label":"name"},null,8,["options","modelValue"]),(D=t.value)!=null&&D.sections?(n(),l("div",ae,[(n(!0),l(Q,null,E(t.value.sections,p=>(n(),l("div",{class:"font-semibold",key:p.id},[A(m(p.title)+" ",1),f(X,{questions:p.questions},null,8,["questions"])]))),128))])):g("v-if",!0)])]}),_:1})])}}});const re=N(oe,[["__file","/opt/atlassian/pipelines/agent/build/src/views/templates/TemplatesDetailView.vue"]]);export{re as default};
