import{D as d,l as c,c as l,E as i,O as r}from"../index35192.js";import{C as g}from"./common-service35192.js";const D=d("company-store",()=>{const n=c(null),o=c(null),u=l(()=>{var a;return(a=n.value)==null?void 0:a.companies}),m=l(()=>o.value),s=l(()=>{var a,e;return(e=(a=n.value)==null?void 0:a.total_records)!=null?e:0});async function p(a){try{return n.value=await r.fetchAllV2(a),n.value}catch(e){throw n.value=null,console.error(e),e}}async function y(a){try{o.value=await r.getCompanyDetailV2(a)}catch(e){throw o.value=null,console.error(e),e}}async function f(a){try{o.value=await r.createCompanyV2(a)}catch(e){throw console.error(e),e}}async function C(a){try{await r.deleteCompanyV2(a)}catch(e){throw console.error(e),e}}async function v(a,e){try{if(e.name&&(o.value=await r.updateCompanyV2(a,{name:e.name})),e.file){const{upload_url:t,key:w}=await r.uploadImageUrl(a,{file_name:e.file.name,file_type:e.file.type,field_name:"image"});await g.uploadFileToS3(t,e.file),await r.confirmUploadImage(a,{key:w,name:e.file.name})}}catch(t){throw console.error(t),t}}function h(){n.value=null,o.value=null}return{paginatedCompanies:i(n),company:i(o),currentCompanies:u,currentCompany:m,currentCompaniesTotal:s,fetchAllCompanies:p,fetchCompanyDetail:y,createCompany:f,deleteCompany:C,updateCompany:v,$reset:h}});export{D as u};
