import{V as xe,k as R,W as Re,N as j,J as q,X as S,L as we,c as y,Y as be,Z as _e,$ as W,a0 as Z,p as c,a1 as J,g as Ce,a2 as Ee,h as Ve,u as je,m as Le,r as N,a as k,b as L,w as X,o as B,d as E,a3 as Oe,y as Y,e as Q,H as Pe,A as Se,l as Ie,q as ze,_ as Te}from"../index58703.js";function K(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((n,t)=>(r.includes(t)||(n[t]=c(e[t])),n),{})}function P(e){return typeof e=="function"}function Ae(e){return be(e)||_e(e)}function le(e,r,n){let t=e;const a=r.split(".");for(let d=0;d<a.length;d++){if(!t[a[d]])return n;t=t[a[d]]}return t}function M(e,r,n){return y(()=>e.some(t=>le(r,t,{[n]:!1})[n]))}function ee(e,r,n){return y(()=>e.reduce((t,a)=>{const d=le(r,a,{[n]:!1})[n]||[];return t.concat(d)},[]))}function oe(e,r,n,t){return e.call(t,c(r),c(n),t)}function ie(e){return e.$valid!==void 0?!e.$valid:!e}function Ne(e,r,n,t,a,d,g){let{$lazy:o,$rewardEarly:v}=a,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],l=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const i=R(!!t.value),s=R(0);n.value=!1;const $=j([r,t].concat(u,h),()=>{if(o&&!t.value||v&&!m.value&&!n.value)return;let f;try{f=oe(e,r,l,g)}catch(p){f=Promise.reject(p)}s.value++,n.value=!!s.value,i.value=!1,Promise.resolve(f).then(p=>{s.value--,n.value=!!s.value,d.value=p,i.value=ie(p)}).catch(p=>{s.value--,n.value=!!s.value,d.value=p,i.value=!0})},{immediate:!0,deep:typeof r=="object"});return{$invalid:i,$unwatch:$}}function ke(e,r,n,t,a,d,g,o){let{$lazy:v,$rewardEarly:u}=t;const l=()=>({}),m=y(()=>{if(v&&!n.value||u&&!o.value)return!1;let h=!0;try{const i=oe(e,r,g,d);a.value=i,h=ie(i)}catch(i){a.value=i}return h});return{$unwatch:l,$invalid:m}}function Be(e,r,n,t,a,d,g,o,v,u,l){const m=R(!1),h=e.$params||{},i=R(null);let s,$;e.$async?{$invalid:s,$unwatch:$}=Ne(e.$validator,r,m,n,t,i,a,e.$watchTargets,v,u,l):{$invalid:s,$unwatch:$}=ke(e.$validator,r,n,t,i,a,v,u);const f=e.$message;return{$message:P(f)?y(()=>f(K({$pending:m,$invalid:s,$params:K(h),$model:r,$response:i,$validator:d,$propertyPath:o,$property:g}))):f||"",$params:h,$pending:m,$invalid:s,$response:i,$unwatch:$}}function Me(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=c(e),n=Object.keys(r),t={},a={},d={};let g=null;return n.forEach(o=>{const v=r[o];switch(!0){case P(v.$validator):t[o]=v;break;case P(v):t[o]={$validator:v};break;case o==="$validationGroups":g=v;break;case o.startsWith("$"):d[o]=v;break;default:a[o]=v}}),{rules:t,nestedValidators:a,config:d,validationGroups:g}}function qe(){}const De="__root";function ue(e,r,n){if(n)return r?r(e()):e();try{var t=Promise.resolve(e());return r?t.then(r):t}catch(a){return Promise.reject(a)}}function Fe(e,r){return ue(e,qe,r)}function Ge(e,r){var n=e();return n&&n.then?n.then(r):r(n)}function He(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return Promise.resolve(e.apply(this,r))}catch(t){return Promise.reject(t)}}}function Ue(e,r,n,t,a,d,g,o,v){const u=Object.keys(e),l=t.get(a,e),m=R(!1),h=R(!1),i=R(0);if(l){if(!l.$partial)return l;l.$unwatch(),m.value=l.$dirty.value}const s={$dirty:m,$path:a,$touch:()=>{m.value||(m.value=!0)},$reset:()=>{m.value&&(m.value=!1)},$commit:()=>{}};return u.length?(u.forEach($=>{s[$]=Be(e[$],r,s.$dirty,d,g,$,n,a,v,h,i)}),s.$externalResults=y(()=>o.value?[].concat(o.value).map(($,f)=>({$propertyPath:a,$property:n,$validator:"$externalResults",$uid:`${a}-externalResult-${f}`,$message:$,$params:{},$response:null,$pending:!1})):[]),s.$invalid=y(()=>{const $=u.some(f=>c(s[f].$invalid));return h.value=$,!!s.$externalResults.value.length||$}),s.$pending=y(()=>u.some($=>c(s[$].$pending))),s.$error=y(()=>s.$dirty.value?s.$pending.value||s.$invalid.value:!1),s.$silentErrors=y(()=>u.filter($=>c(s[$].$invalid)).map($=>{const f=s[$];return S({$propertyPath:a,$property:n,$validator:$,$uid:`${a}-${$}`,$message:f.$message,$params:f.$params,$response:f.$response,$pending:f.$pending})}).concat(s.$externalResults.value)),s.$errors=y(()=>s.$dirty.value?s.$silentErrors.value:[]),s.$unwatch=()=>u.forEach($=>{s[$].$unwatch()}),s.$commit=()=>{h.value=!0,i.value=Date.now()},t.set(a,e,s),s):(l&&t.set(a,e,s),s)}function We(e,r,n,t,a,d,g){const o=Object.keys(e);return o.length?o.reduce((v,u)=>(v[u]=D({validations:e[u],state:r,key:u,parentKey:n,resultsCache:t,globalConfig:a,instance:d,externalResults:g}),v),{}):{}}function Ze(e,r,n){const t=y(()=>[r,n].filter(s=>s).reduce((s,$)=>s.concat(Object.values(c($))),[])),a=y({get(){return e.$dirty.value||(t.value.length?t.value.every(s=>s.$dirty):!1)},set(s){e.$dirty.value=s}}),d=y(()=>{const s=c(e.$silentErrors)||[],$=t.value.filter(f=>(c(f).$silentErrors||[]).length).reduce((f,p)=>f.concat(...p.$silentErrors),[]);return s.concat($)}),g=y(()=>{const s=c(e.$errors)||[],$=t.value.filter(f=>(c(f).$errors||[]).length).reduce((f,p)=>f.concat(...p.$errors),[]);return s.concat($)}),o=y(()=>t.value.some(s=>s.$invalid)||c(e.$invalid)||!1),v=y(()=>t.value.some(s=>c(s.$pending))||c(e.$pending)||!1),u=y(()=>t.value.some(s=>s.$dirty)||t.value.some(s=>s.$anyDirty)||a.value),l=y(()=>a.value?v.value||o.value:!1),m=()=>{e.$touch(),t.value.forEach(s=>{s.$touch()})},h=()=>{e.$commit(),t.value.forEach(s=>{s.$commit()})},i=()=>{e.$reset(),t.value.forEach(s=>{s.$reset()})};return t.value.length&&t.value.every(s=>s.$dirty)&&m(),{$dirty:a,$errors:g,$invalid:o,$anyDirty:u,$error:l,$pending:v,$touch:m,$reset:i,$silentErrors:d,$commit:h}}function D(e){const r=He(function(){return A(),Ge(function(){if(f.$rewardEarly)return U(),Fe(J)},function(){return ue(J,function(){return new Promise(x=>{if(!T.value)return x(!z.value);const _=j(T,()=>{x(!z.value),_()})})})})});let{validations:n,state:t,key:a,parentKey:d,childResults:g,resultsCache:o,globalConfig:v={},instance:u,externalResults:l}=e;const m=d?`${d}.${a}`:a,{rules:h,nestedValidators:i,config:s,validationGroups:$}=Me(n),f=Object.assign({},v,s),p=a?y(()=>{const x=c(t);return x?c(x[a]):void 0}):t,V=Object.assign({},c(l)||{}),F=y(()=>{const x=c(l);return a?x?c(x[a]):void 0:x}),G=Ue(h,p,a,o,m,f,u,F,t),b=We(i,p,m,o,f,u,F),H={};$&&Object.entries($).forEach(x=>{let[_,w]=x;H[_]={$invalid:M(w,b,"$invalid"),$error:M(w,b,"$error"),$pending:M(w,b,"$pending"),$errors:ee(w,b,"$errors"),$silentErrors:ee(w,b,"$silentErrors")}});const{$dirty:I,$errors:fe,$invalid:z,$anyDirty:$e,$error:me,$pending:T,$touch:A,$reset:ve,$silentErrors:ge,$commit:U}=Ze(G,b,g),pe=a?y({get:()=>c(p),set:x=>{I.value=!0;const _=c(t),w=c(l);w&&(w[a]=V[a]),q(_[a])?_[a].value=x:_[a]=x}}):null;a&&f.$autoDirty&&j(p,()=>{I.value||A();const x=c(l);x&&(x[a]=V[a])},{flush:"sync"});function he(x){return(g.value||{})[x]}function ye(){q(l)?l.value=V:Object.keys(V).length===0?Object.keys(l).forEach(x=>{delete l[x]}):Object.assign(l,V)}return S(Object.assign({},G,{$model:pe,$dirty:I,$error:me,$errors:fe,$invalid:z,$anyDirty:$e,$pending:T,$touch:A,$reset:ve,$path:m||De,$silentErrors:ge,$validate:r,$commit:U},g&&{$getResultsForChild:he,$clearExternalResults:ye,$validationGroups:H},b))}class Je{constructor(){this.storage=new Map}set(r,n,t){this.storage.set(r,{rules:n,result:t})}checkRulesValidity(r,n,t){const a=Object.keys(t),d=Object.keys(n);return d.length!==a.length||!d.every(o=>a.includes(o))?!1:d.every(o=>n[o].$params?Object.keys(n[o].$params).every(v=>c(t[o].$params[v])===c(n[o].$params[v])):!0)}get(r,n){const t=this.storage.get(r);if(!t)return;const{rules:a,result:d}=t,g=this.checkRulesValidity(r,n,a),o=d.$unwatch?d.$unwatch:()=>({});return g?d:{$dirty:d.$dirty,$partial:!0,$unwatch:o}}}const O={COLLECT_ALL:!0,COLLECT_NONE:!1},te=Symbol("vuelidate#injectChildResults"),ne=Symbol("vuelidate#removeChildResults");function Xe(e){let{$scope:r,instance:n}=e;const t={},a=R([]),d=y(()=>a.value.reduce((l,m)=>(l[m]=c(t[m]),l),{}));function g(l,m){let{$registerAs:h,$scope:i,$stopPropagation:s}=m;s||r===O.COLLECT_NONE||i===O.COLLECT_NONE||r!==O.COLLECT_ALL&&r!==i||(t[h]=l,a.value.push(h))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],g);function o(l){a.value=a.value.filter(m=>m!==l),delete t[l]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],o);const v=W(te,[]);Z(te,n.__vuelidateInjectInstances);const u=W(ne,[]);return Z(ne,n.__vuelidateRemoveInstances),{childResults:d,sendValidationResultsToParent:v,removeValidationResultsFromParent:u}}function ce(e){return new Proxy(e,{get(r,n){return typeof r[n]=="object"?ce(r[n]):y(()=>r[n])}})}let re=0;function Ye(e,r){var n;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(t=e,e=void 0,r=void 0);let{$registerAs:a,$scope:d=O.COLLECT_ALL,$stopPropagation:g,$externalResults:o,currentVueInstance:v}=t;const u=v||((n=xe())===null||n===void 0?void 0:n.proxy),l=u?u.$options:{};a||(re+=1,a=`_vuelidate_${re}`);const m=R({}),h=new Je,{childResults:i,sendValidationResultsToParent:s,removeValidationResultsFromParent:$}=u?Xe({$scope:d,instance:u}):{childResults:R({})};if(!e&&l.validations){const f=l.validations;r=R({}),Re(()=>{r.value=u,j(()=>P(f)?f.call(r.value,new ce(r.value)):f,p=>{m.value=D({validations:p,state:r,childResults:i,resultsCache:h,globalConfig:t,instance:u,externalResults:o||u.vuelidateExternalResults})},{immediate:!0})}),t=l.validationsConfig||t}else{const f=q(e)||Ae(e)?e:S(e||{});j(f,p=>{m.value=D({validations:p,state:r,childResults:i,resultsCache:h,globalConfig:t,instance:u!=null?u:{},externalResults:o})},{immediate:!0})}return u&&(s.forEach(f=>f(m,{$registerAs:a,$scope:d,$stopPropagation:g})),we(()=>$.forEach(f=>f(a)))),y(()=>Object.assign({},c(m.value),i.value))}const de=e=>{if(e=c(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let r in e)return!0;return!1}return!!String(e).length};function C(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=>(t=c(t),!de(t)||r.every(a=>a.test(t)))}C(/^[a-zA-Z]*$/);C(/^[a-zA-Z0-9]*$/);C(/^\d*(\.\d+)?$/);const Qe=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var Ke=C(Qe),et={$validator:Ke,$message:"Value is not a valid email address",$params:{type:"email"}};const se=(e,r)=>e?de(typeof r=="string"?r.trim():r):!0;function tt(e){return function(r,n){if(typeof e!="function")return se(c(e),r);const t=e.call(this,r,n);return se(t,r)}}function ae(e){return{$validator:tt(e),$message:"The value is required",$params:{type:"requiredIf",prop:e}}}const nt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;C(nt);C(/(^[0-9]*$)|(^-[0-9]+$)/);C(/^[-]?\d*(\.\d+)?$/);const rt={class:"flex justify-content-center align-items-center h-screen",style:{width:"min(40em, 98%)",margin:"auto"}},st=["innerHTML"],at=["innerHTML"],lt={class:"mt-4 text-right"},ot=Ce({__name:"LoginView",setup(e){const r=Ee(),n=Ve(),t=je(),{showLoader:a,hideLoader:d}=ze();Le(()=>{r.setSidebarVisibility(!1)});const g=R(1),o=S({email:"",password:"",terms:null}),v={email:{required:ae(()=>g.value==1),email:et},password:{required:ae(()=>g.value==2)}},u=R(!1),l=Ye(v,o),m=async h=>{if(u.value=!0,g.value==2&&o.password.length!=5)return;if(!h)return;const i={username:o.email,password:o.password};a();try{await t.login(i),r.setSidebarVisibility(!0),await Se.push({name:"campagne"})}catch(s){Ie(n,s)}finally{d()}};return(h,i)=>{const s=N("InputText"),$=N("SubmitBtn"),f=N("Card");return B(),k("div",rt,[L(f,{class:"p-4"},{header:X(()=>[...i[3]||(i[3]=[E("div",{class:"mt-5 text-center"},[E("img",{src:Oe,style:{width:"min(400px, 80%)"}})],-1)])]),content:X(()=>[i[4]||(i[4]=E("h1",null,"Benvenuto!",-1)),i[5]||(i[5]=E("h2",{class:"font-weight-normal mb-5"}," Inserisci le credenziali ed accedi all\u2019area riservata. ",-1)),E("form",{class:"mt-4 flex flex-column",onSubmit:i[2]||(i[2]=Pe(p=>m(!c(l).$invalid),["prevent"]))},[L(s,{id:"email",class:Y({"p-invalid":c(l).email.$invalid&&u.value,"w-100":!0,"mb-1":!0}),placeholder:"Indirizzo email *",modelValue:c(l).email.$model,"onUpdate:modelValue":i[0]||(i[0]=p=>c(l).email.$model=p)},null,8,["class","modelValue"]),u.value&&c(l).email.$errors.length>0?(B(),k("label",{key:0,class:"p-error w-100",innerHTML:c(l).email.$errors.map(p=>p.$message).join("<br />")},null,8,st)):Q("v-if",!0),L(s,{id:"password",class:Y({"p-invalid":c(l).password.$invalid&&u.value,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"Password *",modelValue:c(l).password.$model,"onUpdate:modelValue":i[1]||(i[1]=p=>c(l).password.$model=p)},null,8,["class","modelValue"]),u.value&&c(l).password.$errors.length>0?(B(),k("label",{key:1,class:"p-error w-100",innerHTML:c(l).password.$errors.map(p=>p.$message).join("<br />")},null,8,at)):Q("v-if",!0),E("div",lt,[L($,{label:"Invia",class:"btn-max-width",width:"w-100"})])],32)]),_:1})])}}}),ut=Te(ot,[["__file","/opt/atlassian/pipelines/agent/build/src/views/auth/LoginView.vue"]]);export{ut as default};
