import{C as s,D,k as l,c as o,E as u}from"../index58703.js";class i{static async fetchAll(e){return await s.get("/campaigns",{params:e})}static async createCampaign(e){return(await s.post("/campaigns",e)).campaign}static async getCampaignDetail(e){return await s.get(`/campaigns/${e}`)}static async updateCampaign(e,t){return(await s.patch(`/campaigns/${e}`,t)).campaign}static async deleteCampaign(e){await s.delete(`/campaigns/${e}`)}static async generateSurveySubmissionLinks(e,t){return await s.post(`/campaigns/${e}/generate_survey_submission_links`,t)}static async downloadExcelSubmissionLinks(e){return await s.get(`/campaigns/${e}/download_excel_submission_links`,{responseType:"blob"})}static async sendRecall(e){await s.get(`/campaigns/${e}/recall`)}static async sendCredentials(e){await s.get(`/campaigns/${e}/send_credentials`)}static async findByEmail(e,t){return await s.post(`/campaigns/${e}/find_by_email`,{email:t})}}const B=D("campaign-store",()=>{const c=l(null),e=l(null),t=l(null),p=o(()=>{var n;return(n=c.value)==null?void 0:n.campaigns}),g=o(()=>{var n,a;return(a=(n=c.value)==null?void 0:n.total_records)!=null?a:0}),y=o(()=>e.value),d=o(()=>t.value),w=o(()=>{var n,a,r,m;return t.value&&(m=(r=(a=(n=e.value)==null?void 0:n.surveys)==null?void 0:a[t.value])==null?void 0:r.questions)!=null?m:null});async function v(n){try{return c.value=await i.fetchAll(n),c.value}catch(a){throw c.value=null,console.error(a),a}}async function C(n){try{return await i.createCampaign(n)}catch(a){throw console.error(a),a}}async function h(n){try{return e.value=(await i.getCampaignDetail(n)).campaign,e.value}catch(a){throw e.value=null,console.error(a),a}}async function f(n,a){try{return e.value=await i.updateCampaign(n,a),e.value}catch(r){throw e.value=null,console.error(r),r}}async function S(n){try{await i.deleteCampaign(n)}catch(a){throw console.error(a),a}}function b(n){t.value=n}async function _(n,a){try{return(await i.generateSurveySubmissionLinks(n,a)).counter}catch(r){throw console.error(r),r}}async function k(n){try{return await i.downloadExcelSubmissionLinks(n)}catch(a){throw console.error(a),a}}async function $(n){try{await i.sendRecall(n)}catch(a){throw console.error(a),a}}async function E(n){try{await i.sendCredentials(n)}catch(a){throw console.error(a),a}}async function L(n,a){try{return await i.findByEmail(n,a)}catch(r){throw console.error(r),r}}function x(){c.value=null,e.value=null,t.value=null}return{paginatedCampaigns:u(c),campaign:u(e),surveyCode:u(t),currentCampaigns:p,totalCampaigns:g,currentCampaign:y,currentSurveyCode:d,currentCampaignQuestions:w,fetchAllCampaigns:v,createCampaign:C,fetchCampaignDetail:h,updateCampaign:f,deleteCampaign:S,setSurveyCode:b,generateSurveySubmissionLinks:_,downloadExcelSubmissionLinks:k,sendRecall:$,sendCredentials:E,findByEmail:L,$reset:x}});export{B as u};
