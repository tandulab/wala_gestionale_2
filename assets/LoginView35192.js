import{aa as Re,l as R,ab as we,J as I,M,ac as S,Q as _e,c as y,ad as be,ae as Ee,af as W,ag as Y,q as c,ah as Z,g as Ce,h as Ve,i as Ie,u as je,n as Le,ai as J,r as B,a as N,b as j,w as Q,o as k,d as C,aj as Oe,y as X,e as K,ak as Se,B as Te,m as Pe,L as ze,_ as Ae}from"../index35192.js";function ee(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((n,t)=>(r.includes(t)||(n[t]=c(e[t])),n),{})}function O(e){return typeof e=="function"}function Be(e){return be(e)||Ee(e)}function oe(e,r,n){let t=e;const s=r.split(".");for(let d=0;d<s.length;d++){if(!t[s[d]])return n;t=t[s[d]]}return t}function D(e,r,n){return y(()=>e.some(t=>oe(r,t,{[n]:!1})[n]))}function te(e,r,n){return y(()=>e.reduce((t,s)=>{const d=oe(r,s,{[n]:!1})[n]||[];return t.concat(d)},[]))}function ie(e,r,n,t){return e.call(t,c(r),c(n),t)}function ue(e){return e.$valid!==void 0?!e.$valid:!e}function Ne(e,r,n,t,s,d,g){let{$lazy:o,$rewardEarly:v}=s,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],l=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const i=R(!!t.value),a=R(0);n.value=!1;const $=I([r,t].concat(u,h),()=>{if(o&&!t.value||v&&!m.value&&!n.value)return;let f;try{f=ie(e,r,l,g)}catch(p){f=Promise.reject(p)}a.value++,n.value=!!a.value,i.value=!1,Promise.resolve(f).then(p=>{a.value--,n.value=!!a.value,d.value=p,i.value=ue(p)}).catch(p=>{a.value--,n.value=!!a.value,d.value=p,i.value=!0})},{immediate:!0,deep:typeof r=="object"});return{$invalid:i,$unwatch:$}}function ke(e,r,n,t,s,d,g,o){let{$lazy:v,$rewardEarly:u}=t;const l=()=>({}),m=y(()=>{if(v&&!n.value||u&&!o.value)return!1;let h=!0;try{const i=ie(e,r,g,d);s.value=i,h=ue(i)}catch(i){s.value=i}return h});return{$unwatch:l,$invalid:m}}function De(e,r,n,t,s,d,g,o,v,u,l){const m=R(!1),h=e.$params||{},i=R(null);let a,$;e.$async?{$invalid:a,$unwatch:$}=Ne(e.$validator,r,m,n,t,i,s,e.$watchTargets,v,u,l):{$invalid:a,$unwatch:$}=ke(e.$validator,r,n,t,i,s,v,u);const f=e.$message;return{$message:O(f)?y(()=>f(ee({$pending:m,$invalid:a,$params:ee(h),$model:r,$response:i,$validator:d,$propertyPath:o,$property:g}))):f||"",$params:h,$pending:m,$invalid:a,$response:i,$unwatch:$}}function Me(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=c(e),n=Object.keys(r),t={},s={},d={};let g=null;return n.forEach(o=>{const v=r[o];switch(!0){case O(v.$validator):t[o]=v;break;case O(v):t[o]={$validator:v};break;case o==="$validationGroups":g=v;break;case o.startsWith("$"):d[o]=v;break;default:s[o]=v}}),{rules:t,nestedValidators:s,config:d,validationGroups:g}}function qe(){}const Fe="__root";function ce(e,r,n){if(n)return r?r(e()):e();try{var t=Promise.resolve(e());return r?t.then(r):t}catch(s){return Promise.reject(s)}}function Ge(e,r){return ce(e,qe,r)}function He(e,r){var n=e();return n&&n.then?n.then(r):r(n)}function Ue(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return Promise.resolve(e.apply(this,r))}catch(t){return Promise.reject(t)}}}function We(e,r,n,t,s,d,g,o,v){const u=Object.keys(e),l=t.get(s,e),m=R(!1),h=R(!1),i=R(0);if(l){if(!l.$partial)return l;l.$unwatch(),m.value=l.$dirty.value}const a={$dirty:m,$path:s,$touch:()=>{m.value||(m.value=!0)},$reset:()=>{m.value&&(m.value=!1)},$commit:()=>{}};return u.length?(u.forEach($=>{a[$]=De(e[$],r,a.$dirty,d,g,$,n,s,v,h,i)}),a.$externalResults=y(()=>o.value?[].concat(o.value).map(($,f)=>({$propertyPath:s,$property:n,$validator:"$externalResults",$uid:`${s}-externalResult-${f}`,$message:$,$params:{},$response:null,$pending:!1})):[]),a.$invalid=y(()=>{const $=u.some(f=>c(a[f].$invalid));return h.value=$,!!a.$externalResults.value.length||$}),a.$pending=y(()=>u.some($=>c(a[$].$pending))),a.$error=y(()=>a.$dirty.value?a.$pending.value||a.$invalid.value:!1),a.$silentErrors=y(()=>u.filter($=>c(a[$].$invalid)).map($=>{const f=a[$];return S({$propertyPath:s,$property:n,$validator:$,$uid:`${s}-${$}`,$message:f.$message,$params:f.$params,$response:f.$response,$pending:f.$pending})}).concat(a.$externalResults.value)),a.$errors=y(()=>a.$dirty.value?a.$silentErrors.value:[]),a.$unwatch=()=>u.forEach($=>{a[$].$unwatch()}),a.$commit=()=>{h.value=!0,i.value=Date.now()},t.set(s,e,a),a):(l&&t.set(s,e,a),a)}function Ye(e,r,n,t,s,d,g){const o=Object.keys(e);return o.length?o.reduce((v,u)=>(v[u]=q({validations:e[u],state:r,key:u,parentKey:n,resultsCache:t,globalConfig:s,instance:d,externalResults:g}),v),{}):{}}function Ze(e,r,n){const t=y(()=>[r,n].filter(a=>a).reduce((a,$)=>a.concat(Object.values(c($))),[])),s=y({get(){return e.$dirty.value||(t.value.length?t.value.every(a=>a.$dirty):!1)},set(a){e.$dirty.value=a}}),d=y(()=>{const a=c(e.$silentErrors)||[],$=t.value.filter(f=>(c(f).$silentErrors||[]).length).reduce((f,p)=>f.concat(...p.$silentErrors),[]);return a.concat($)}),g=y(()=>{const a=c(e.$errors)||[],$=t.value.filter(f=>(c(f).$errors||[]).length).reduce((f,p)=>f.concat(...p.$errors),[]);return a.concat($)}),o=y(()=>t.value.some(a=>a.$invalid)||c(e.$invalid)||!1),v=y(()=>t.value.some(a=>c(a.$pending))||c(e.$pending)||!1),u=y(()=>t.value.some(a=>a.$dirty)||t.value.some(a=>a.$anyDirty)||s.value),l=y(()=>s.value?v.value||o.value:!1),m=()=>{e.$touch(),t.value.forEach(a=>{a.$touch()})},h=()=>{e.$commit(),t.value.forEach(a=>{a.$commit()})},i=()=>{e.$reset(),t.value.forEach(a=>{a.$reset()})};return t.value.length&&t.value.every(a=>a.$dirty)&&m(),{$dirty:s,$errors:g,$invalid:o,$anyDirty:u,$error:l,$pending:v,$touch:m,$reset:i,$silentErrors:d,$commit:h}}function q(e){const r=Ue(function(){return A(),He(function(){if(f.$rewardEarly)return U(),Ge(Z)},function(){return ce(Z,function(){return new Promise(x=>{if(!z.value)return x(!P.value);const b=I(z,()=>{x(!P.value),b()})})})})});let{validations:n,state:t,key:s,parentKey:d,childResults:g,resultsCache:o,globalConfig:v={},instance:u,externalResults:l}=e;const m=d?`${d}.${s}`:s,{rules:h,nestedValidators:i,config:a,validationGroups:$}=Me(n),f=Object.assign({},v,a),p=s?y(()=>{const x=c(t);return x?c(x[s]):void 0}):t,V=Object.assign({},c(l)||{}),F=y(()=>{const x=c(l);return s?x?c(x[s]):void 0:x}),G=We(h,p,s,o,m,f,u,F,t),_=Ye(i,p,m,o,f,u,F),H={};$&&Object.entries($).forEach(x=>{let[b,w]=x;H[b]={$invalid:D(w,_,"$invalid"),$error:D(w,_,"$error"),$pending:D(w,_,"$pending"),$errors:te(w,_,"$errors"),$silentErrors:te(w,_,"$silentErrors")}});const{$dirty:T,$errors:$e,$invalid:P,$anyDirty:me,$error:ve,$pending:z,$touch:A,$reset:ge,$silentErrors:pe,$commit:U}=Ze(G,_,g),he=s?y({get:()=>c(p),set:x=>{T.value=!0;const b=c(t),w=c(l);w&&(w[s]=V[s]),M(b[s])?b[s].value=x:b[s]=x}}):null;s&&f.$autoDirty&&I(p,()=>{T.value||A();const x=c(l);x&&(x[s]=V[s])},{flush:"sync"});function ye(x){return(g.value||{})[x]}function xe(){M(l)?l.value=V:Object.keys(V).length===0?Object.keys(l).forEach(x=>{delete l[x]}):Object.assign(l,V)}return S(Object.assign({},G,{$model:he,$dirty:T,$error:ve,$errors:$e,$invalid:P,$anyDirty:me,$pending:z,$touch:A,$reset:ge,$path:m||Fe,$silentErrors:pe,$validate:r,$commit:U},g&&{$getResultsForChild:ye,$clearExternalResults:xe,$validationGroups:H},_))}class Je{constructor(){this.storage=new Map}set(r,n,t){this.storage.set(r,{rules:n,result:t})}checkRulesValidity(r,n,t){const s=Object.keys(t),d=Object.keys(n);return d.length!==s.length||!d.every(o=>s.includes(o))?!1:d.every(o=>n[o].$params?Object.keys(n[o].$params).every(v=>c(t[o].$params[v])===c(n[o].$params[v])):!0)}get(r,n){const t=this.storage.get(r);if(!t)return;const{rules:s,result:d}=t,g=this.checkRulesValidity(r,n,s),o=d.$unwatch?d.$unwatch:()=>({});return g?d:{$dirty:d.$dirty,$partial:!0,$unwatch:o}}}const L={COLLECT_ALL:!0,COLLECT_NONE:!1},ne=Symbol("vuelidate#injectChildResults"),re=Symbol("vuelidate#removeChildResults");function Qe(e){let{$scope:r,instance:n}=e;const t={},s=R([]),d=y(()=>s.value.reduce((l,m)=>(l[m]=c(t[m]),l),{}));function g(l,m){let{$registerAs:h,$scope:i,$stopPropagation:a}=m;a||r===L.COLLECT_NONE||i===L.COLLECT_NONE||r!==L.COLLECT_ALL&&r!==i||(t[h]=l,s.value.push(h))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],g);function o(l){s.value=s.value.filter(m=>m!==l),delete t[l]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],o);const v=W(ne,[]);Y(ne,n.__vuelidateInjectInstances);const u=W(re,[]);return Y(re,n.__vuelidateRemoveInstances),{childResults:d,sendValidationResultsToParent:v,removeValidationResultsFromParent:u}}function de(e){return new Proxy(e,{get(r,n){return typeof r[n]=="object"?de(r[n]):y(()=>r[n])}})}let ae=0;function Xe(e,r){var n;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(t=e,e=void 0,r=void 0);let{$registerAs:s,$scope:d=L.COLLECT_ALL,$stopPropagation:g,$externalResults:o,currentVueInstance:v}=t;const u=v||((n=Re())===null||n===void 0?void 0:n.proxy),l=u?u.$options:{};s||(ae+=1,s=`_vuelidate_${ae}`);const m=R({}),h=new Je,{childResults:i,sendValidationResultsToParent:a,removeValidationResultsFromParent:$}=u?Qe({$scope:d,instance:u}):{childResults:R({})};if(!e&&l.validations){const f=l.validations;r=R({}),we(()=>{r.value=u,I(()=>O(f)?f.call(r.value,new de(r.value)):f,p=>{m.value=q({validations:p,state:r,childResults:i,resultsCache:h,globalConfig:t,instance:u,externalResults:o||u.vuelidateExternalResults})},{immediate:!0})}),t=l.validationsConfig||t}else{const f=M(e)||Be(e)?e:S(e||{});I(f,p=>{m.value=q({validations:p,state:r,childResults:i,resultsCache:h,globalConfig:t,instance:u!=null?u:{},externalResults:o})},{immediate:!0})}return u&&(a.forEach(f=>f(m,{$registerAs:s,$scope:d,$stopPropagation:g})),_e(()=>$.forEach(f=>f(s)))),y(()=>Object.assign({},c(m.value),i.value))}const fe=e=>{if(e=c(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let r in e)return!0;return!1}return!!String(e).length};function E(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=>(t=c(t),!fe(t)||r.every(s=>s.test(t)))}E(/^[a-zA-Z]*$/);E(/^[a-zA-Z0-9]*$/);E(/^\d*(\.\d+)?$/);const Ke=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var et=E(Ke),tt={$validator:et,$message:"Value is not a valid email address",$params:{type:"email"}};const se=(e,r)=>e?fe(typeof r=="string"?r.trim():r):!0;function nt(e){return function(r,n){if(typeof e!="function")return se(c(e),r);const t=e.call(this,r,n);return se(t,r)}}function le(e){return{$validator:nt(e),$message:"The value is required",$params:{type:"requiredIf",prop:e}}}const rt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;E(rt);E(/(^[0-9]*$)|(^-[0-9]+$)/);E(/^[-]?\d*(\.\d+)?$/);const at={class:"flex justify-content-center align-items-center h-screen"},st=["innerHTML"],lt=["innerHTML"],ot={class:"mt-4 text-right"},it=Ce({__name:"LoginView",setup(e){const r=Ve(),n=Ie(),t=je(),{showLoader:s,hideLoader:d}=ze();Le(()=>{r.dispatch(J.SET_SIDEBAR_VISIBILITY,!1)});const g=R(1),o=S({email:"",password:"",terms:null}),v={email:{required:le(()=>g.value==1),email:tt},password:{required:le(()=>g.value==2)}},u=R(!1),l=Xe(v,o),m=async h=>{if(u.value=!0,g.value==2&&o.password.length!=5)return;if(!h)return;const i={username:o.email,password:o.password};s();try{await t.login(i),r.dispatch(J.SET_SIDEBAR_VISIBILITY,!0),await Te.push({name:"campagne"})}catch(a){Pe(n,a)}finally{d()}};return(h,i)=>{const a=B("InputText"),$=B("SubmitBtn"),f=B("Card");return k(),N("div",at,[j(f,{class:"p-4"},{header:Q(()=>[...i[3]||(i[3]=[C("div",{class:"mt-5 text-center"},[C("img",{src:Oe,style:{width:"80px"}})],-1)])]),content:Q(()=>[i[4]||(i[4]=C("h1",null,"Benvenuto!",-1)),i[5]||(i[5]=C("h2",{class:"font-weight-normal mb-5"}," Inserisci le credenziali ed accedi all\u2019area riservata. ",-1)),C("form",{class:"mt-4 flex flex-column",onSubmit:i[2]||(i[2]=Se(p=>m(!c(l).$invalid),["prevent"]))},[j(a,{id:"email",class:X({"p-invalid":c(l).email.$invalid&&u.value,"w-100":!0,"mb-1":!0}),placeholder:"Indirizzo email *",modelValue:c(l).email.$model,"onUpdate:modelValue":i[0]||(i[0]=p=>c(l).email.$model=p)},null,8,["class","modelValue"]),u.value&&c(l).email.$errors.length>0?(k(),N("label",{key:0,class:"p-error w-100",innerHTML:c(l).email.$errors.map(p=>p.$message).join("<br />")},null,8,st)):K("v-if",!0),j(a,{id:"password",class:X({"p-invalid":c(l).password.$invalid&&u.value,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"Password *",modelValue:c(l).password.$model,"onUpdate:modelValue":i[1]||(i[1]=p=>c(l).password.$model=p)},null,8,["class","modelValue"]),u.value&&c(l).password.$errors.length>0?(k(),N("label",{key:1,class:"p-error w-100",innerHTML:c(l).password.$errors.map(p=>p.$message).join("<br />")},null,8,lt)):K("v-if",!0),C("div",ot,[j($,{label:"Invia",class:"btn-max-width",width:"w-100"})])],32)]),_:1})])}}}),ct=Ae(it,[["__file","/Users/giacomo/Developer/tandu/wala/wala-gestionale-aziende/wala-gestionale-aziende/src/views/auth/LoginView.vue"]]);export{ct as default};
