import{X as k,D as U,l as x,c as B,E as T,g as $,k as I,r as y,p as M,o as a,f as C,w as S,a as r,G as E,d as f,t as v,e as w,z as R,b as h,I as Q,B as L,_ as z,i as O,n as P,m as V,L as j,s as q}from"../index35192.js";class A{static async fetchAllBaseSurveys(){return await k.get("/base_surveys")}static async fetchBaseSurveyDetail(o){return(await k.get(`/base_surveys/${o}`)).base_survey}}const F=U("base-survey-store",()=>{const u=x(null),o=x(null),c=B(()=>{var s,l;return(l=(s=u.value)==null?void 0:s.base_surveys)!=null?l:[]}),p=B(()=>{var s;return(s=o.value)!=null?s:null});async function d(){try{u.value=await A.fetchAllBaseSurveys()}catch(s){console.error(s)}}async function n(s){try{o.value=await A.fetchBaseSurveyDetail(s)}catch(l){console.error(l)}}function m(){u.value=null}return{paginatedBaseSurveys:T(u),baseSurvey:T(o),currentBaseSurveys:c,currentBaseSurvey:p,fetchBaseSurveys:d,fetchBaseSurveyDetail:n,$reset:m}}),G={class:"flex flex-column w-full"},X={class:"flex justify-content-between py-2 px-3 align-items-center"},H={key:0,class:"text-500 font-semibold"},J={key:1,class:"text-500 font-semibold"},K={class:"px-3 py-2"},W=$({__name:"BaseSurveyQuestionsList",props:{questions:{type:Array,required:!1}},setup(u){const o=I(),c=function(p,d){p.stopPropagation(),o.name=="dettaglio-campagna"?L.push({name:"campagna-dettaglio-domanda",params:{...o.params,question_id:d.id}}):L.push({name:"dettaglio-domanda",params:{id:d.id}})};return(p,d)=>{const n=y("Button"),m=y("Column"),s=y("DataTable"),l=y("AccordionTab"),D=y("Accordion"),g=M("tooltip");return a(),C(D,null,{default:S(()=>[(a(!0),r(Q,null,E(u.questions,(e,t)=>(a(),C(l,{key:e.id},{header:S(()=>[f("div",G,[f("div",X,[e.description?(a(),r("div",H,v(e.order)+") "+v(e.description),1)):w("v-if",!0),e!=null&&e.title?(a(),r("div",J,[f("span",null,v(t+1)+") "+v(e.title),1)])):w("v-if",!0),R(h(n,{type:"button",onClick:i=>c(i,e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-pencil"},null,8,["onClick"]),[[g,"Modifica",void 0,{top:!0}]])])])]),default:S(()=>[f("div",K,[h(s,{value:e.answers,responsiveLayout:"scroll"},{default:S(()=>[h(m,{field:"label",header:"Risposte"})]),_:1},8,["value"])])]),_:2},1024))),128))]),_:1})}}});const Y=z(W,[["__file","/Users/giacomo/Developer/tandu/wala/wala-gestionale-aziende/wala-gestionale-aziende/src/components/questions/BaseSurveyQuestionsList.vue"]]),Z={class:"m-4"},ee={class:"flex flex-column"},se={key:0},te={key:0},ae={key:1},oe={key:2,class:"flex flex-column gap-4 py-4"},ne=$({__name:"TemplatesDetailView",setup(u){const o=O(),c=F(),{showLoader:p,hideLoader:d}=j(),n=x(null),m=B(()=>c.currentBaseSurveys),s=B(()=>c.currentBaseSurvey),l=B(()=>{var e;if(!!((e=s.value)!=null&&e.sections))return s.value.sections.reduce((t,i)=>t+(i.questions?i.questions.length:0),0)}),D=async()=>{try{p(),await c.fetchBaseSurveys()}catch(e){V(o,e)}finally{d()}},g=async e=>{try{if(!e)return;p(),await c.fetchBaseSurveyDetail(e)}catch(t){V(o,t)}finally{d()}};return P(async()=>{var e,t,i;await D(),n.value=(t=(e=m.value)==null?void 0:e[0])!=null?t:null,(i=n.value)!=null&&i.id&&await g(n.value.id)}),(e,t)=>{const i=y("Dropdown"),N=y("Card");return a(),r("div",Z,[w(' <Breadcrumb :home="home" :model="items" class="mb-3 mt-0 pt-0" /> '),h(N,null,{content:S(()=>{var b;return[f("div",ee,[f("h1",null,[t[2]||(t[2]=q(" TEMPLATE QUESTIONARIO - ",-1)),n.value?(a(),r("span",se,v(n.value.name),1)):w("v-if",!0)]),l.value===1?(a(),r("h2",te,v(l.value)+" Domanda ",1)):(a(),r("h2",ae,v(l.value)+" Domande",1)),h(i,{options:m.value,modelValue:n.value,"onUpdate:modelValue":[t[0]||(t[0]=_=>n.value=_),t[1]||(t[1]=_=>g(_.id))],"option-label":"name"},null,8,["options","modelValue"]),(b=s.value)!=null&&b.sections?(a(),r("div",oe,[(a(!0),r(Q,null,E(s.value.sections,_=>(a(),r("div",{class:"font-semibold",key:_.id},[q(v(_.title)+" ",1),h(Y,{questions:_.questions},null,8,["questions"])]))),128))])):w("v-if",!0)])]}),_:1})])}}});const re=z(ne,[["__file","/Users/giacomo/Developer/tandu/wala/wala-gestionale-aziende/wala-gestionale-aziende/src/views/templates/TemplatesDetailView.vue"]]);export{re as default};
