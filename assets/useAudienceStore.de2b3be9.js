import{D as C,l as o,c as u,E as l,P as r}from"./index.5000a42e.js";import{C as S}from"./common-service.13629423.js";const g=C("audience-store",()=>{const a=o(null),t=o(null),i=u(()=>{var n;return(n=a.value)==null?void 0:n.audiences}),s=u(()=>t.value),d=u(()=>{var n,e;return(e=(n=a.value)==null?void 0:n.total_records)!=null?e:0});async function v(n){try{return a.value=await r.fetchAllV2(n),a.value}catch(e){throw a.value=null,console.error(e),e}}async function A(n){try{return t.value=(await r.getAudienceDetailV2(n)).audience,t.value}catch(e){throw t.value=null,console.error(e),e}}async function y(n){try{const e=await r.createAudienceV2(n);return t.value=e.audience,t.value}catch(e){throw console.error(e),e}}async function f(n){try{await r.deleteAudienceV2(n)}catch(e){throw console.error(e),e}}async function h(n,e){try{t.value=await r.updateAudienceV2(n,e)}catch(c){throw console.error(c),c}}async function p(n,e){try{const{upload_url:c,key:w}=await r.uploadContactsUrl(n,{file_name:e.name,file_type:e.type,field_name:"contacts"});return await S.uploadFileToS3(c,e),t.value=(await r.confirmUploadContacts(n,{key:w,name:e.name})).audience,t.value}catch(c){throw console.error(c),c}}function m(){a.value=null,t.value=null}return{paginatedAudiences:l(a),audience:l(t),currentAudiences:i,currentAudience:s,currentAudiencesTotal:d,fetchAllAudiences:v,fetchAudienceDetail:A,createAudience:y,deleteAudience:f,updateAudience:h,importContacts:p,$reset:m}});export{g as u};
